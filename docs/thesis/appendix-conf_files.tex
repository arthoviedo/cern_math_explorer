\chapter{Configuration files}
\label{appendix-conf_files}

\section{Solr schema}
The Solr schema file \verb|schema.xml| indicates which are the fields that are going to be used in this instance, and what type of analyzer is going to be used for each one. One can also define field types in case different fields want to have the same behaviour but conceptually having different meanings. 

The following snippet add the fields declarations:

\begin{verbatim}
   <!-- Arthur Oviedo AO-->
   <!-- Fields declaration using the field types declared below-->
   <field name="math_notational_field" 
   		type="math_notational_type"/>
   <field name="math_structural_field" 
   		type="math_structural_type"/>
   <field name="math_normalized_notational_field" 
   		type="math_normalized_notational_type"/>
   <field name="filename" 
   		type="string" indexed="true" stored="true"/>
   <field name="number_occurrences" 
   		type="int" indexed="true" stored="true"/>
\end{verbatim}

And the following one, defines the types and the configurations (Including the java class implementing the analyzer) for each one:

\begin{verbatim}
	<fieldType name="math_normalized_notational_type" 
		class="solr.TextField" 
		positionIncrementGap="1"
		indexed="true" 
		stored="true" 
		termVectors="true" 
		termPositions="true" >
		<analyzer class="cern.ch.mathexplorer.lucene.analysis.analyzers.
			SolrNormalizerNotationalAnalyzer"/>
	</fieldType>
	
	<!-- Field type for MathMl info 
	(Tokens that are extracted from the MathML representation)
	over the normalized/simplified string using Full simplification-->
	<fieldType name="math_full_normalized_notational_type" 
		class="solr.TextField" 
		positionIncrementGap="1"
		indexed="true" 
		stored="true" 
		termVectors="true" 
		termPositions="true" >
		<analyzer class="cern.ch.mathexplorer.lucene.analysis.analyzers.
			SolrFullNormalizerNotationalAnalyzer"/>
	</fieldType>
	
	<!-- Field type for  structural features extracted from the equation-->
	<fieldType name="math_structural_type" 
		class="solr.TextField" 
		positionIncrementGap="1"
		indexed="true" 
		stored="true" 
		termVectors="true" 
		termPositions="true" >
		<analyzer class="cern.ch.mathexplorer.lucene.analysis.analyzers.
			SolrStructuralAnalyzer"/>
	</fieldType>

\end{verbatim}
 
\section{Solr configuration file}
The \verb|solrconfig.xml| file specifies additional configuration parameters of the instance, including what handlers to use for each different type of request. One specific type of handler is \verb|queryParser|, and for using our specific query parser we include the following line of code:

\begin{verbatim}
  <queryParser name="mathqueryparser" 
  class="cern.ch.mathexplorer.lucene.query.MathQueryParserPlugin" />
\end{verbatim}